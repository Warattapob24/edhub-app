{% extends "base.html" %}

{% block sidebar %}
<nav id="sidebarMenu" class="col-md-3 col-lg-2 d-md-block bg-light sidebar collapse">
    <div class="position-sticky pt-3">
        <div class="d-flex justify-content-end align-items-center px-3 mb-2">
            <i class="bi bi-list fs-4" id="sidebar-toggle" title="ยุบ/ขยายเมนู"></i>
        </div>
        <hr class="mt-0">

        <h6 class="sidebar-heading px-3 mt-2 mb-1 text-muted"><span>แดชบอร์ดหลัก</span></h6>
        <ul class="nav flex-column">
            {% if current_user.has_role('Teacher') or current_user.advised_classrooms or current_user.courses %}<li class="nav-item"><a class="nav-link" href="{{ url_for('teacher.dashboard') }}"><i class="bi bi-person-video3 me-2"></i> <span>หน้าหลักครู</span></a></li>{% endif %}
            {% if current_user.led_subject_group %}<li class="nav-item"><a class="nav-link" href="{{ url_for('department.dashboard') }}"><i class="bi bi-diagram-3-fill me-2"></i> <span>หัวหน้ากลุ่มสาระฯ</span></a></li>{% endif %}
            {% if current_user.has_role('Academic') %}<li class="nav-item"><a class="nav-link" href="{{ url_for('academic.dashboard') }}"><i class="bi bi-building-gear me-2"></i> <span>ฝ่ายวิชาการ</span></a></li>{% endif %}
            {% if current_user.has_role('Director') %}<li class="nav-item"><a class="nav-link" href="{{ url_for('director.dashboard') }}"><i class="bi bi-person-workspace me-2"></i> <span>ผู้อำนวยการ</span></a></li>{% endif %}
            {% if current_user.has_role('Admin') %}<li class="nav-item"><a class="nav-link active" href="{{ url_for('admin.index') }}"><i class="bi bi-shield-lock-fill me-2"></i> <span>ผู้ดูแลระบบ</span></a></li>{% endif %}
        </ul>
        <hr>
        <h6 class="sidebar-heading px-3 mt-4 mb-1 text-muted"><span>เมนูผู้ดูแลระบบ</span></h6>
        <ul class="nav flex-column mb-2">
            <li class="nav-item"><a class="nav-link" href="{{ url_for('admin.manage_settings') }}"><i class="bi bi-gear-fill me-2"></i> <span>ตั้งค่าโรงเรียน</span></a></li>
            <li class="nav-item"><a class="nav-link" href="{{ url_for('admin.list_users') }}"><i class="bi bi-people me-2"></i> <span>จัดการผู้ใช้งาน</span></a></li>
             </ul>
        <hr>        
        <h6 class="sidebar-heading d-flex justify-content-between align-items-center px-3 mt-4 mb-1 text-muted text-uppercase">
            <span>ตั้งค่าระบบ</span>
        </h6>
        <ul class="nav flex-column">
            <li class="nav-item"><a class="nav-link" href="{{ url_for('admin.index') }}"><i class="bi bi-house-door-fill"></i> <span>แดชบอร์ด</span></a></li>
            <li class="nav-item"><a class="nav-link" href="{{ url_for('admin.manage_settings') }}"><i class="bi bi-gear-fill"></i> <span>ตั้งค่าโรงเรียน</span></a></li>
            <li class="nav-item"><a class="nav-link" href="{{ url_for('admin.list_academic_years') }}"><i class="bi bi-calendar3"></i> <span>ปี/ภาคการเรียน</span></a></li>
        </ul>

        <h6 class="sidebar-heading d-flex justify-content-between align-items-center px-3 mt-4 mb-1 text-muted text-uppercase">
            <span>ข้อมูลบุคคล</span>
        </h6>
        <ul class="nav flex-column">
            <li class="nav-item"><a class="nav-link" href="{{ url_for('admin.manage_positions') }}"><i class="bi bi-diagram-3"></i> <span>ผังองค์กร/มอบหมายตำแหน่ง</span></a></li>
            <li class="nav-item"><a class="nav-link" href="{{ url_for('admin.list_users') }}"><i class="bi bi-people"></i> <span>จัดการผู้ใช้งาน</span></a></li>
            <li class="nav-item"><a class="nav-link" href="{{ url_for('admin.import_teachers') }}"><i class="bi bi-person-plus"></i> <span>นำเข้าข้อมูลครู</span></a></li>
            <li class="nav-item"><a class="nav-link" href="{{ url_for('admin.list_roles') }}"><i class="bi bi-key"></i> <span>จัดการบทบาท</span></a></li>
            <li class="nav-item"><a class="nav-link" href="{{ url_for('admin.list_students') }}"><i class="bi bi-person-badge"></i> <span>จัดการข้อมูลนักเรียน</span></a></li>
            <li class="nav-item"><a class="nav-link" href="{{ url_for('admin.import_students') }}"><i class="bi bi-people-fill"></i> <span>นำเข้าข้อมูลนักเรียน</span></a></li>
        </ul>

        <h6 class="sidebar-heading d-flex justify-content-between align-items-center px-3 mt-4 mb-1 text-muted text-uppercase">
            <span>ข้อมูลหลักสูตร</span>
        </h6>
        <ul class="nav flex-column">
            <li class="nav-item"><a class="nav-link" href="{{ url_for('admin.list_grade_levels') }}"><i class="bi bi-bar-chart-steps"></i> <span>ระดับชั้น</span></a></li>
            <li class="nav-item"><a class="nav-link" href="{{ url_for('admin.list_classrooms') }}"><i class="bi bi-grid-3x3-gap"></i> <span>ห้องเรียน</span></a></li>
            <li class="nav-item"><a class="nav-link" href="{{ url_for('admin.list_subject_groups') }}"><i class="bi bi-collection"></i> <span>กลุ่มสาระฯ</span></a></li>
            <li class="nav-item"><a class="nav-link" href="{{ url_for('admin.list_subject_types') }}"><i class="bi bi-tags"></i> <span>ประเภทวิชา</span></a></li>
            <li class="nav-item"><a class="nav-link" href="{{ url_for('admin.list_subjects') }}"><i class="bi bi-book"></i> <span>รายวิชา</span></a></li>
            <li class="nav-item"><a class="nav-link" href="{{ url_for('admin.import_subjects') }}"><i class="bi bi-file-earmark-plus"></i> <span>นำเข้ารายวิชา</span></a></li>
            <li class="nav-item"><a class="nav-link" href="{{ url_for('admin.manage_curriculum') }}"><i class="bi bi-journal-check"></i> <span>จัดหลักสูตร</span></a></li>
            <li class="nav-item"><a class="nav-link" href="{{ url_for('admin.manage_assignments') }}"><i class="bi bi-person-check-fill"></i> <span>มอบหมายการสอน</span></a></li>
        </ul>

        <h6 class="sidebar-heading d-flex justify-content-between align-items-center px-3 mt-4 mb-1 text-muted text-uppercase">
             <span>การวัดและประเมินผล</span>
        </h6>
        <ul class="nav flex-column mb-2">
            <li class="nav-item"><a class="nav-link" href="{{ url_for('admin.manage_standards') }}"><i class="bi bi-journal-bookmark-fill"></i> <span>คลังมาตรฐาน/ตัวชี้วัด</span></a></li>
            <li class="nav-item"><a class="nav-link" href="{{ url_for('admin.list_dimensions') }}"><i class="bi bi-rulers"></i> <span>จัดการมิติการประเมิน</span></a></li>
            <li class="nav-item"><a class="nav-link" href="{{ url_for('admin.list_assessment_templates') }}"><i class="bi bi-pencil-square"></i> <span>สร้างแม่แบบการประเมิน</span></a></li>
        </ul>
    </div>
</nav>
{% endblock %}

{% block main_content %}
    <div class="d-flex justify-content-between flex-wrap flex-md-nowrap align-items-center pt-3 pb-2 mb-3 border-bottom">
        <h1 class="h2">
            {% if icon_class %}<i class="bi {{ icon_class }} me-2"></i>{% endif %}
            {{ title }}
        </h1>
    </div>
    {% block admin_content %}{% endblock %}
{% endblock %}