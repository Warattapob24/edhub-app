/* --- START NEW CSS - FULL BLEED CONTAINER (v4) --- */

/* Force the main content container (from base.html) 
   to allow overflow so negative margins work.
   You might need to adjust this depending on base.html structure.
*/
main.main-content {
  overflow-x: visible !important; /* Allow content to break out */
  /* Remove padding JUST IN CASE, but negative margins are the main fix */
  padding-left: 0 !important;
  padding-right: 0 !important; 
}

/* Make the mobile container itself break out of any parent padding */
#mobileEntryContainer {
  width: 100vw; /* Force width to viewport width */
  max-width: 100vw;
  /* Use negative margin equal to the assumed parent padding */
  /* Try adjusting this value if it's still not aligned */
  margin-left: calc(-1 * var(--bs-gutter-x, 0.75rem)); /* Compensate for Bootstrap container padding */
  margin-right: calc(-1 * var(--bs-gutter-x, 0.75rem));
  /* Remove any padding it might have */
  padding-left: 0 !important;
  padding-right: 0 !important;
  box-sizing: border-box; /* Ensure width includes padding/border */
}

/* Ensure #studentGrid uses the full width of its parent */
#studentGrid {
  width: 100%;
  max-width: 100%; 
  margin-left: auto;  
  margin-right: auto; 
  padding-top: 0.5rem; 
  padding-bottom: 0.5rem; 
  /* Add small padding HERE to align grid content with status bar content */
  padding-left: calc(var(--bs-gutter-x, 0.75rem) / 2); 
  padding-right: calc(var(--bs-gutter-x, 0.75rem) / 2); 
  margin-right: 0 !important;
  margin-left: 0 !important;
}

/* --- END NEW CSS - FULL BLEED CONTAINER --- */


/* --- Ensure body padding still accounts for fixed elements --- */
body {
    padding-top: 100px; 
    padding-bottom: 70px; 
    background-color: #f8f9fa; 
    overflow-x: hidden; /* Prevent horizontal scrollbar caused by 100vw */
}

/* --- Column padding (Keep as is) --- */
#studentGrid > .col {
  padding-left: 2px; 
  padding-right: 2px;
  display: flex; 
  align-items: stretch; 
}

/* Ensure the student card inside the column fills the padded space */
#studentGrid > .col > .student-card {
  width: 100%; 
  height: 100%; /* Make card fill the column */
}

.student-card {
    /* ... (Existing styles: display: flex, flex-direction, padding, border, etc.) ... */
    /* REMOVE width: 100% and height: 100% if they are duplicated here */
    display: flex;
    flex-direction: column;
    align-items: center;
    justify-content: space-between; 
    padding: 0.3rem 0.2rem;
    border: 1px solid #dee2e6;
    border-radius: 0.5rem; 
    background-color: #ffffff;
    box-shadow: 0 1px 2px rgba(0,0,0,0.05);
    text-align: center;
    cursor: grab;
    transition: background-color 0.3s ease, transform 0.2s ease, box-shadow 0.2s ease;
    user-select: none;
    -webkit-user-select: none;
    -ms-user-select: none;
    touch-action: manipulation;
    min-height: 100px; 
}

.student-card:active {
    cursor: grabbing;
    transform: scale(1.05);
    box-shadow: 0 4px 10px rgba(0,0,0,0.15);
}

.student-card.dragging {
    opacity: 0.5;
    background: #e9ecef;
}

/* Slightly smaller avatar and font sizes */
.student-avatar {
    font-size: 1.5rem; /* Was 1.75rem */
    color: #adb5bd;
    margin-top: 0.1rem; /* Adjust spacing */
}

.student-name {
    font-size: 0.75rem; /* Was 0.85rem */
    font-weight: 500;
    color: #212529;
    white-space: nowrap;
    overflow: hidden;
    text-overflow: ellipsis;
    /* Max width to prevent touching edges */
    width: 95%;
    margin-top: 0.1rem; /* Adjust spacing */
    margin-bottom: 0.1rem; /* Adjust spacing */
}

.score-display {
    font-size: 0.8rem; /* Was 0.9rem */
    font-weight: bold;
    color: #0d6efd;
    margin-top: 0.1rem; /* Adjust spacing */
    min-height: 1rem; /* Slightly smaller min-height */
}

.student-number {
    font-size: 0.65rem; /* Was 0.75rem */
    font-weight: bold;
    color: #6c757d;
    position: absolute;
    top: 3px; /* Adjust position */
    left: 5px; /* Adjust position */
}

/* =================================================
== นี่คือส่วนที่สำคัญที่สุด (สำหรับสี) ==
=================================================
*/

/* Attendance Status Colors */
.student-card[data-status="PRESENT"] { background-color: #d1e7dd; border-color: #a3cfbb; }
.student-card[data-status="LATE"] { background-color: #fff3cd; border-color: #ffe69c; }
.student-card[data-status="LEAVE"] { background-color: #cff4fc; border-color: #9eeaf9; }
.student-card[data-status="ABSENT"] { background-color: #f8d7da; border-color: #f1aeb5; }

/* Fixed Footer: Status Zones */
#statusZones {
    height: 65px; /* Fixed height */
    box-shadow: 0 -2px 10px rgba(0,0,0,0.1);
}

.status-zone {
    flex-grow: 1;
    display: flex;
    flex-direction: column;
    align-items: center;
    justify-content: center;
    font-size: 0.75rem;
    font-weight: 500;
    border-radius: 8px;
    margin: 0 2px;
    transition: background-color 0.2s ease;
}

/* Status zone highlighting when dragging over */
.status-zone.drag-over {
    transform: scale(1.05);
}

.status-zone.present { color: #0f5132; background-color: #d1e7dd; }
.status-zone.late { color: #664d03; background-color: #fff3cd; }
.status-zone.leave { color: #055160; background-color: #cff4fc; }
.status-zone.absent { color: #58151c; background-color: #f8d7da; }

.status-zone.present.drag-over { background-color: #b1d8c5; }
.status-zone.late.drag-over { background-color: #ffe69c; }
.status-zone.leave.drag-over { background-color: #9eeaf9; }
.status-zone.absent.drag-over { background-color: #f1aeb5; }


/* Grouping Modal */
.group-container h6 {
    border-bottom: 2px solid #e9ecef;
    padding-bottom: 5px;
    font-weight: 600;
}

.group-zone {
    min-height: 100px;
    background-color: #f8f9fa;
    border: 2px dashed #dee2e6;
    border-radius: 8px;
    padding: 8px;
    display: flex;
    flex-wrap: wrap;
    gap: 8px;
    align-content: flex-start;
}

/* Highlight for drop zone in modal */
.group-zone.drag-over {
    background-color: #e2e6ea;
    border-color: #adb5bd;
}

/* Student card styling inside the modal (slimmer) */
.group-zone .student-card {
    flex-direction: row;
    width: auto;
    padding: 4px 8px;
    gap: 8px;
}
.group-zone .student-card .student-avatar { display: none; }
.group-zone .student-card .student-number { position: static; }
.group-zone .student-card .score-display { display: none; }